!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("FaviconCountBase",[],e):"object"==typeof exports?exports.FaviconCountBase=e():t.FaviconCountBase=e()}(this,(function(){return function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function a(t,e,n){const a=[],r=t<e,o=n?r?e+1:e-1:e;for(let e=t;r?e<o:e>o;r?e++:e--)a.push(e);return a}n.r(e);const r={0:[[0,0,1,1,1,1,0,0],[0,1,0,0,0,0,1,0],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[0,1,0,0,0,0,1,0],[0,0,1,1,1,1,0,0]],1:[[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,1,1,1,0,0,0],[0,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,1,1,1,1,1,1,1]],2:[[0,1,1,1,1,0,0,0],[1,0,0,0,0,1,0,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,0],[0,0,0,0,0,1,0,0],[0,0,0,0,1,0,0,0],[0,0,0,1,0,0,0,0],[0,0,1,0,0,0,0,0],[0,1,0,0,0,0,0,0],[1,1,1,1,1,1,1,1]],3:[[0,1,1,1,1,1,0,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,0],[0,0,0,1,1,1,0,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,0],[0,1,1,1,1,1,0,0]],4:[[0,0,0,0,0,1,0,0],[0,0,0,0,1,1,0,0],[0,0,0,1,0,1,0,0],[0,0,1,0,0,1,0,0],[0,1,0,0,0,1,0,0],[1,0,0,0,0,1,0,0],[1,0,0,0,0,1,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0]],5:[[0,1,1,1,1,1,1,1],[0,1,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,1,1,1,1,1,0,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[1,0,0,0,0,0,1,0],[0,1,1,1,1,1,0,0]],6:[[0,0,0,1,1,1,1,0],[0,0,1,0,0,0,0,0],[0,1,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[1,0,1,1,1,1,0,0],[1,1,0,0,0,0,1,0],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[0,1,0,0,0,0,1,0],[0,0,1,1,1,1,0,0]],7:[[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,1,0,0,0,0,0,0]],8:[[0,0,1,1,1,1,0,0],[0,1,0,0,0,0,1,0],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[0,1,0,0,0,0,1,0],[0,0,1,1,1,1,0,0],[0,1,0,0,0,0,1,0],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[0,1,0,0,0,0,1,0],[0,0,1,1,1,1,0,0]],9:[[0,0,1,1,1,1,0,0],[0,1,0,0,0,0,1,0],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[0,1,0,0,0,0,1,1],[0,0,1,1,1,1,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,1,0,0],[0,1,1,1,1,0,0,0]],"+":[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,1,1,1,1,1,1,1],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]};e.default=class{constructor(){const t=this.getFavicon();t&&(this.faviconImage=t.getAttribute("href"),[this.head]=document.getElementsByTagName("head"))}render(t){null!=t?this.drawCountOnCanvas(t,t=>{this.addIconToDom(t.toDataURL("image/png"))}):this.getFaviconCanvas(t=>{this.addIconToDom(t.toDataURL("image/png"))})}getFavicon(){var t;return(t=document.getElementsByTagName("link"),[].slice.call(t)).filter(t=>t.getAttribute("rel").includes("icon")).sort((t,e)=>{const n=t.getAttribute("sizes")?parseInt(t.getAttribute("sizes").split("x")[0],10):0,a=e.getAttribute("sizes")?parseInt(e.getAttribute("sizes").split("x")[0],10):0;return 32===n?-1:32===a?1:a-n})[0]}getFaviconCanvas(t){if(this.faviconCanvas)t(this.faviconCanvas);else{this.faviconCanvas=document.createElement("canvas"),this.faviconCanvas.width=32,this.faviconCanvas.height=32;const e=this.faviconCanvas.getContext("2d"),n=new Image;n.crossOrigin="anonymous",n.addEventListener("load",()=>{e.drawImage(n,0,0,32,32),t(this.faviconCanvas)},!0),n.src=this.faviconImage}}drawCountOnCanvas(t,e){const n=t>99?"99+":t;if(this.drawnCanvases||(this.drawnCanvases={}),this.drawnCanvases[n])return void e(this.drawnCanvases[n]);const a=String(n).length;this.getFaviconCanvas(t=>{const o=document.createElement("canvas");o.height=t.width,o.width=t.width;const i=o.getContext("2d");i.drawImage(t,0,0),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(i.strokeStyle="rgba(28, 27, 33, 0.6)",i.fillStyle="#FFF"):(i.strokeStyle="rgba(255, 255, 255, 0.6)",i.fillStyle="#000");const s=.0625*t.width,c=t.height-r[0].length-s,d=r[0][0].length*a+2*(a-1);let l=t.width-d-1;l<0&&(l=0),this.drawCharacters({characters:n,fn:(t,e)=>{i.strokeRect(t+l-2,e+c-2,6,6)}}),this.drawCharacters({characters:n,fn:(t,e)=>{i.fillRect(t+l,e+c,2,2)}}),this.drawnCanvases[n]=o,e(o)})}drawCharacters({characters:t,fn:e}){let n,o,i,s,c=0;a(0,String(t).length).forEach((d,l)=>{n=String(t)[l],r[n]&&(o=r[n],i=o.length,s=o[0].length,c=s*l+2*l,a(0,i).forEach(t=>{a(0,s).forEach(n=>{o[t][n]&&e(n+c,t)})}))})}addIconToDom(t){const e=this.head.getElementsByTagName("link");[].slice.call(e).forEach(t=>{"shortcut icon"!==t.rel&&"icon"!==t.rel||this.head.removeChild(t)});const n=document.createElement("link");n.type="image/png",n.rel="shortcut icon",n.href=t,this.head.appendChild(n);const a=document.createElement("iframe");a.width=0,a.height=0,document.body.appendChild(a),a.src="icon",document.body.removeChild(a)}}}])}));